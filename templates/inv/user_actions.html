
{# templates/inv/user_actions.html #}

{% load auth_extras %}

<div class="d-flex justify-content-center align-items-center">
  {% url 'inv:toggle_user_group' record.pk as toggle_url %}
  <form method="post" action="{{ toggle_url }}" class="m-0 p-0 d-inline">
    {% csrf_token %}
    <input type="hidden" name="group" value="{{ group_name }}">
    <input {% if not request.user|in_group:"Admin" and not request.user.is_staff %}disabled aria-disabled="true" {% endif %}
      class="form-check-input"
      type="checkbox"
      role="switch"
      id="switch-{{ group_name|slugify }}-{{ record.pk }}"
      name="is_member"
      {% if record|in_group:group_name %}checked{% endif %}
      onchange="this.form.submit()"
    >

    <label class="form-check-label ms-1 small"
           for="switch-{{ group_name|slugify }}-{{ record.pk }}">
      {{ group_name }}
    </label>

    <input type="hidden" name="next" value="{{ request.get_full_path }}">
  </form>
</div>
