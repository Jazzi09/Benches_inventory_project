{# templates/inv/inventory_form.html #}
<form method="post" action="" class="card card-body shadow-sm">
    {% csrf_token %}

    {% if current_project %}
    <div class="mb-3">
        <label class="form-label fw-semibold">Project</label><br>
        <span class="badge rounded-pill bg-body-secondary text-secondary-emphasis border px-3 py-2">
            <i class="bi bi-kanban me-1"></i>{{ current_project.label|default:current_project.code }}
        </span>
        <input type="hidden" name="project" value="{{ current_project.code }}">
    </div>
    {% else %}
        {% if form.project %}
            <div class="mb-3">
                <label class="form-label">Project</label>
                {{ form.project }}
                {% if form.project.errors %}
                    <div class="invalid-feedback d-block">{{ form.project.errors|striptags }}</div>
                {% endif %}
            </div>
        {% endif %}
    {% endif %}

  {# Capexopex (radios) #}
  {% if form.capex_opex %}
    <div class="mb-3">
      <label class="form-label fw-semibold">Capex/Opex</label>
      <div class="d-flex flex-wrap gap-4">
        {% for opt in form.capex_opex %}
          <div class="form-check">
            {{ opt.tag }}
            <label class="form-check-label" for="{{ opt.id_for_label }}">{{ opt.choice_label }}</label>
          </div>
        {% endfor %}
      </div>
      {% if form.capex_opex.errors %}
        <div class="invalid-feedback d-block">{{ form.capex_opex.errors|striptags }}</div>
      {% endif %}
    </div>
  {% endif %}

  {# Type (radios) #}
  {% if form.type %}
    <div class="mb-3">
      <label class="form-label fw-semibold">Type</label>
      <div class="d-flex flex-wrap gap-4">
        {% for opt in form.type %}
          <div class="form-check">
            {{ opt.tag }}
            <label class="form-check-label" for="{{ opt.id_for_label }}">{{ opt.choice_label }}</label>
          </div>
        {% endfor %}
      </div>
      {% if form.type.errors %}
        <div class="invalid-feedback d-block">{{ form.type.errors|striptags }}</div>
      {% endif %}
    </div>
  {% endif %}

  <div class="row g-3">

    {% if form.qty %}
      <div class="col-12 col-md-4">
        <label class="form-label fw-semibold">QTY</label>
        {{ form.qty }}
        {% if form.qty.errors %}
          <div class="invalid-feedback d-block">{{ form.qty.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.project %}
      <div class="col-12 col-md-4">
        <label class="form-label fw-semibold">Project</label>
        {{ form.project }}
        {% if form.project.errors %}
          <div class="invalid-feedback d-block">{{ form.project.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.assigned_bench %}
      <div class="col-12 col-md-4">
        <label class="form-label fw-semibold">Assigned bench</label>
        {{ form.assigned_bench }}
        {% if form.assigned_bench.errors %}
          <div class="invalid-feedback d-block">{{ form.assigned_bench.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.cft_number %}
      <div class="col-md-6">
        <label class="form-label fw-semibold">CFT #</label>
        {{ form.cft_number }}
        {% if form.cft_number.errors %}
          <div class="invalid-feedback d-block">{{ form.cft_number.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.pr_number %}
      <div class="col-md-6">
        <label class="form-label fw-semibold">PR #</label>
        {{ form.pr_number }}
        {% if form.pr_number.errors %}
          <div class="invalid-feedback d-block">{{ form.pr_number.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.po_number %}
      <div class="col-md-6">
        <label class="form-label fw-semibold">PO #</label>
        {{ form.po_number }}
        {% if form.po_number.errors %}
          <div class="invalid-feedback d-block">{{ form.po_number.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.wo_number %}
      <div class="col-md-6">
        <label class="form-label fw-semibold">WO</label>
        {{ form.wo_number }}
        {% if form.wo_number.errors %}
          <div class="invalid-feedback d-block">{{ form.wo_number.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.invoice_id %}
      <div class="col-md-6">
        <label class="form-label fw-semibold">Invoice ID</label>
        {{ form.invoice_id }}
        {% if form.invoice_id.errors %}
          <div class="invalid-feedback d-block">{{ form.invoice_id.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <div class="row g-3">
    {% if form.description %}
      <div class="col-12">
        <label class="form-label fw-semibold">Description</label>
        {{ form.description }}
        {% if form.description.errors %}
          <div class="invalid-feedback d-block">{{ form.description.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}

    {% if form.comments %}
      <div class="col-12">
        <label class="form-label fw-semibold">Comments</label>
        {{ form.comments }}
        {% if form.comments.errors %}
          <div class="invalid-feedback d-block">{{ form.comments.errors|striptags }}</div>
        {% endif %}
      </div>
    {% endif %}
  </div>
</form>

<div class="d-flex justify-content-end gap-2 mt-4">
    {% if in_modal %}
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
    {% else %}
        <a class="btn btn-outline-secondary" href="{% url 'inv:list' %}">Cancel</a>
    {% endif %}
    <button class="btn btn-primary" type="submit">Save</button>
</div>